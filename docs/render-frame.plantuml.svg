<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="643px" preserveAspectRatio="none" style="width:680px;height:643px;" version="1.1" viewBox="0 0 680 643" width="680px" zoomAndPan="magnify"><defs><filter height="300%" id="fqhk9mw74oyfk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fqhk9mw74oyfk)" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="263" x="396.5" y="317.2832"/><rect fill="#FFFFFF" filter="url(#fqhk9mw74oyfk)" height="136.5527" style="stroke: #000000; stroke-width: 2.0;" width="476" x="193.5" y="407.2148"/><rect fill="#FFFFFF" filter="url(#fqhk9mw74oyfk)" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="324" x="335.5" y="460.8359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="32" x2="32" y1="38.4883" y2="603.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="168.5" x2="168.5" y1="38.4883" y2="603.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="236.5" x2="236.5" y1="38.4883" y2="603.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="370.5" x2="370.5" y1="38.4883" y2="603.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="461.5" x2="461.5" y1="38.4883" y2="603.0781"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="626.5" x2="626.5" y1="38.4883" y2="603.0781"/><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="15" y="23.5352">map</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="8" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="15" y="622.6133">map</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="144.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="151.5" y="23.5352">style</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="144.5" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="151.5" y="622.6133">style</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="203.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="210.5" y="23.5352">painter</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="63" x="203.5" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="210.5" y="622.6133">painter</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="345.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="352.5" y="23.5352">layer</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="345.5" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="352.5" y="622.6133">layer</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="406.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="413.5" y="23.5352">source_cache</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="406.5" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="413.5" y="622.6133">source_cache</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="603.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="610.5" y="23.5352">GPU</text><rect fill="#FEFECE" filter="url(#fqhk9mw74oyfk)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="603.5" y="602.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="610.5" y="622.6133">GPU</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="157" y1="69.7988" y2="65.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="157" y1="69.7988" y2="73.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="168" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="39" y="65.0566">update(transform)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="369" x2="359" y1="99.1094" y2="95.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="369" x2="359" y1="99.1094" y2="103.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="370" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="176" y="94.3672">recalculate()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="371" x2="413" y1="159.041" y2="159.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="413" x2="413" y1="159.041" y2="172.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="372" x2="413" y1="172.041" y2="172.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="372" x2="382" y1="172.041" y2="168.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="372" x2="382" y1="172.041" y2="176.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="378" y="123.6777">recompute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="378" y="138.9883">paint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="378" y="154.2988">properties</text><polygon fill="#A80036" points="449.5,197.3516,459.5,201.3516,449.5,205.3516,453.5,201.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="455.5" y1="201.3516" y2="201.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="39" y="196.6094">update(transform)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="461.5" x2="503.5" y1="230.6621" y2="230.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="503.5" x2="503.5" y1="230.6621" y2="243.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="462.5" x2="503.5" y1="243.6621" y2="243.6621"/><polygon fill="#A80036" points="472.5,239.6621,462.5,243.6621,472.5,247.6621,468.5,243.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="468.5" y="225.9199">fetch new tiles</text><polygon fill="#A80036" points="225,268.9727,235,272.9727,225,276.9727,229,272.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="231" y1="272.9727" y2="272.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="39" y="268.2305">render(style)</text><polygon fill="#A80036" points="449.5,298.2832,459.5,302.2832,449.5,306.2832,453.5,302.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="455.5" y1="302.2832" y2="302.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="244" y="297.541">prepare(context)</text><path d="M396.5,317.2832 L470.5,317.2832 L470.5,324.2832 L460.5,334.2832 L396.5,334.2832 L396.5,317.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="263" x="396.5" y="317.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="411.5" y="330.8516">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="485.5" y="329.918">[for each tile]</text><polygon fill="#A80036" points="614.5,351.9043,624.5,355.9043,614.5,359.9043,618.5,355.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="461.5" x2="620.5" y1="355.9043" y2="355.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="468.5" y="351.1621">upload vertices</text><polygon fill="#A80036" points="614.5,381.2148,624.5,385.2148,614.5,389.2148,618.5,385.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="461.5" x2="620.5" y1="385.2148" y2="385.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="468.5" y="380.4727">upload image textures</text><path d="M193.5,407.2148 L267.5,407.2148 L267.5,414.2148 L257.5,424.2148 L193.5,424.2148 L193.5,407.2148 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="136.5527" style="stroke: #000000; stroke-width: 2.0;" width="476" x="193.5" y="407.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="208.5" y="420.7832">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="252" x="282.5" y="419.8496">[pass=offscreen, opaque, translucent, debug]</text><polygon fill="#A80036" points="359,441.8359,369,445.8359,359,449.8359,363,445.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="365" y1="445.8359" y2="445.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="244" y="441.0938">renderLayer(pass)</text><path d="M335.5,460.8359 L409.5,460.8359 L409.5,467.8359 L399.5,477.8359 L335.5,477.8359 L335.5,460.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.9316" style="stroke: #000000; stroke-width: 2.0;" width="324" x="335.5" y="460.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="350.5" y="474.4043">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="424.5" y="473.4707">[for each tile]</text><polygon fill="#A80036" points="614.5,495.457,624.5,499.457,614.5,503.457,618.5,499.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="371" x2="620.5" y1="499.457" y2="499.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="378" y="494.7148">load program</text><polygon fill="#A80036" points="614.5,524.7676,624.5,528.7676,614.5,532.7676,618.5,528.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="371" x2="620.5" y1="528.7676" y2="528.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="378" y="524.0254">drawElements()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="74" y1="572.0781" y2="572.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="74" y1="572.0781" y2="585.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="74" y1="585.0781" y2="585.0781"/><polygon fill="#A80036" points="43,581.0781,33,585.0781,43,589.0781,39,585.0781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="39" y="567.3359">triggerRepaint()</text><!--
@startuml
participant map
participant style
participant painter
participant layer
participant source_cache
participant GPU

map->>style: update(transform)
style->>layer: recalculate()
layer->>layer: recompute\npaint\nproperties
map->source_cache: update(transform)
source_cache->source_cache: fetch new tiles
map->painter: render(style)
painter->source_cache: prepare(context)
loop for each tile
source_cache->GPU: upload vertices
source_cache->GPU: upload image textures
end
loop pass=offscreen, opaque, translucent, debug
painter->layer: renderLayer(pass)
loop for each tile
layer->GPU: load program
layer->GPU: drawElements()
end
end
map->map: triggerRepaint()
@enduml

PlantUML version 1.2019.06(Fri May 24 13:10:25 EDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_162-b12
Operating System: Mac OS X
OS Version: 10.15.7
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>